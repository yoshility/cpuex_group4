# シミュレータとアセンブラの使い方

## フォルダ構成
```
sim/ -- assembler/ (アセンブラ用のファイル一式)
     -- simulator/ (シミュレータ用のファイル一式)
     -- test/      (入力用アセンブリファイルや生成されたバイナリが入る)
```

## シミュレータの使い方
1. test/にアセンブリファイル、simulator/にsldファイルとppmファイルを用意

   ※ アセンブリの書式は`test/fib_iter2.s`を参照し、空白行や#コメントだけの行を作らないように 
2. simulator/下で以下を実行
   ```
   $ make
   $ ./sim ../test/<assembly> <sld> <ppm> <option1> <option2> <option3>
   ```

※ `option`の説明：
   ```
   option1: デバッグモードにする               -> 1
            デバッグモードにしない             -> 0
   option2: キャッシュを使いたい               -> 1
            キャッシュではなくメモリのみ使う   -> 0
   option3: 1命令ずつ実行したい                -> 1
            最後まで一気に実行したい           -> 0
   ```
使用例：
   
   アセンブリ`hello.s`を実行（デバッグモード、キャッシュなし、一命令ずつ実行）：
   ```
   $ ./sim ../test/hello.s base.sld test.ppm 1 0 1
   ```
   1命令ずつ実行するときはエンターを押せば次の命令に行く。
   
※ ターミナルで>コマンドを使えばデバッグ内容をファイルに出力できるので標準出力が多すぎて遡れないときに使ってください。

## アセンブラの使い方
1. testフォルダにアセンブリファイルを用意
2. assembler/下で以下を実行
   ```
   $ make
   $ ./asm ../test/<filename> <option1>
   ```
3. 変換された`binary.txt`が`test/`に入る

※ `option`の説明：
   ```
   option1: デバッグモードで`binary.txt`を作りたい   -> 1
            コアで実行できるプレーンなバイナリを作る  -> なにも書かない
   ```
使用例：

   `fib_iter2.s`をデバッグモードでアセンブルしたいとき：
   ```
   $ ./asm ../test/fib_iter.s 1
   ```
